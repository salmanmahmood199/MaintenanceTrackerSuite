                        {/* Parts Section - Always show */}
                        <div className="bg-background p-4 rounded-lg border border-border">
                          <h4 className="font-semibold mb-3 flex items-center gap-2 text-foreground">
                            <Package className="h-4 w-4" />
                            Parts & Materials
                          </h4>
                          
                          {workOrder.editableParts && workOrder.editableParts.length > 0 ? (
                            <div className="space-y-3">
                              {workOrder.editableParts.map((part, index) => (
                                <div key={index} className="grid grid-cols-4 gap-4 items-center bg-muted/50 p-3 rounded">
                                  <div>
                                    <label className="text-sm font-medium text-foreground">Part Name</label>
                                    <div className="mt-1 font-medium text-foreground">{part.name}</div>
                                  </div>
                                  <div>
                                    <label className="text-sm font-medium text-foreground">Quantity</label>
                                    <div className="mt-1 text-center font-medium text-foreground">{part.quantity}</div>
                                  </div>
                                  <div>
                                    <label className="text-sm font-medium text-foreground">Unit Cost</label>
                                    <div className="flex items-center mt-1">
                                      <span className="mr-1 text-foreground">$</span>
                                      <Input
                                        type="number"
                                        step="0.01"
                                        value={part.cost}
                                        onChange={(e) => {
                                          e.stopPropagation();
                                          updatePartCost(workOrder.id, index, parseFloat(e.target.value) || 0);
                                        }}
                                        onClick={(e) => e.stopPropagation()}
                                        onFocus={(e) => e.stopPropagation()}
                                        className="w-full bg-background text-foreground border-input"
                                      />
                                    </div>
                                  </div>
                                  <div>
                                    <label className="text-sm font-medium text-foreground">Total</label>
                                    <div className="mt-1 text-center font-semibold text-green-600">
                                      ${(part.cost * part.quantity).toFixed(2)}
                                    </div>
                                  </div>
                                </div>
                              ))}
                            </div>
                          ) : (
                            <p className="text-muted-foreground text-sm">
                              No parts used in this work order.
                            </p>
                          )}
                        </div>